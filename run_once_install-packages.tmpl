#!/bin/sh

{{ if eq .chezmoi.osRelease.id "arch" -}}
sudo pacman -S --needed ripgrep bash git fd fzf exa fish bat yarn
{{ end -}}

{{ if eq .chezmoi.osRelease.id "manjaro" -}}
sudo pacman -S --needed ripgrep bash git fd fzf exa fish bat yarn bash
{{ end -}}

{{ if eq .chezmoi.osRelease.id "fedora" -}}
sudo dnf install bash git ripgrep fd-find fzf exa fish npm bat bash
npm install -g yarn
{{ end -}}

{{ if eq .chezmoi.osRelease.id "ubuntu" "debian" -}}
sudo apt-get install git bash fish nodejs curl unzip
npm install -g yarn
curl -o $HOME/exa -LO https://github.com/ogham/exa/releases/download/v0.9.0/exa-linux-x86_64-0.9.0.zip \
&& sudo unzip $HOME/exa -d $HOME && sudo cp $HOME/exa-linux-x86_64 /usr/bin/exa
sudo apt-get install fd-find \
|| (curl -o $HOME/fd -LO https://github.com/sharkdp/fd/releases/download/v8.0.0/fd-musl_8.0.0_amd64.deb \
    && sudo dpkg -i $HOME/fd; rm $HOME/fd)
sudo apt-get install ripgrep \
|| (curl -o $HOME/rg -LO https://github.com/BurntSushi/ripgrep/releases/download/11.0.2/ripgrep_11.0.2_amd64.deb \
    && sudo dpkg -i --force-overwrite $HOME/rg; rm $HOME/rg)
sudo apt-get install bat \
|| (curl -o $HOME/bat -LO https://github.com/sharkdp/bat/releases/download/v0.13.0/bat_0.13.0_amd64.deb \
    && sudo dpkg -i $HOME/bat; rm $HOME/bat)
sudo apt-get install fzf \
|| (git clone --depth 1 https://github.com/junegunn/fzf.git $HOME/.fzf && $HOME/.fzf/install --no-bash --no-zsh --all --64)
{{ end -}}

git clone https://github.com/asdf-vm/asdf.git $HOME/.asdf
git --git-dir=$HOME/.asdf/.git checkout $(git --git-dir=$HOME/.asdf/.git describe --abbrev=0 --tags)
