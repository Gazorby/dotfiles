#!/bin/sh

{{ if eq .chezmoi.osRelease.id "arch" "manjaro" -}}
sudo pacman -S --needed ripgrep bash git fd fzf exa fish bat yarn fakeroot binutils
yarn global add @fabiospampinato/bump
git clone https://aur.archlinux.org/starship-bin.git $HOME/starship \
&& cd $HOME/starship \
&& makepkg --clean --install --syncdeps --noconfirm \
&& cd $HOME && rm -rfd $HOME/starship
git clone https://aur.archlinux.org/asdf-vm.git $HOME/asdf \
&& cd $HOME/asdf \
&& makepkg --clean --install --syncdeps --noconfirm \
&& cd $HOME && rm -rfd $HOME/asdf
{{ end -}}

{{ if eq .chezmoi.osRelease.id "fedora" -}}
sudo dnf module -y disable fish
sudo dnf distro-sync fish
sudo dnf install bash git ripgrep fd-find exa fish npm bat bash fzf findutils
npm install -g yarn
yarn global add @fabiospampinato/bump
curl -fsSL https://starship.rs/install.sh | bash -s -- -y
echo "source /usr/share/fzf/shell/key-bindings.fish" >> $HOME/.config/fish/config.fish
{{ end -}}

{{ if eq .chezmoi.osRelease.id "ubuntu" "debian" -}}
sudo apt-get install git bash fish npm curl unzip
npm install -g yarn
yarn global add @fabiospampinato/bump
curl -fsSL https://starship.rs/install.sh | bash -s -- -y
curl -o $HOME/exa -LO https://github.com/ogham/exa/releases/download/v0.9.0/exa-linux-x86_64-0.9.0.zip \
&& sudo unzip $HOME/exa -d $HOME && sudo mv $HOME/exa-linux-x86_64 /usr/bin/exa && rm -rf $HOME/exa
sudo apt-get install fd-find \
|| (curl -o $HOME/fd -LO https://github.com/sharkdp/fd/releases/download/v8.0.0/fd-musl_8.0.0_amd64.deb \
    && sudo dpkg -i $HOME/fd; rm $HOME/fd)
sudo apt-get install ripgrep \
|| (curl -o $HOME/rg -LO https://github.com/BurntSushi/ripgrep/releases/download/11.0.2/ripgrep_11.0.2_amd64.deb \
    && sudo dpkg -i --force-overwrite $HOME/rg; rm $HOME/rg)
sudo apt-get install bat \
|| (curl -o $HOME/bat -LO https://github.com/sharkdp/bat/releases/download/v0.13.0/bat_0.13.0_amd64.deb \
    && sudo dpkg -i $HOME/bat; rm $HOME/bat)
sudo apt-get install fzf
|| (git clone --depth 1 https://github.com/junegunn/fzf.git $HOME/.fzf && $HOME/.fzf/install --no-bash --no-zsh --all --64)
{{ end -}}

{{ if ne .chezmoi.osRelease.id "archlinux" -}}
{{ if ne .chezmoi.osRelease.id "manjaro" -}}
git clone https://github.com/asdf-vm/asdf.git $HOME/.asdf
git --git-dir=$HOME/.asdf/.git checkout $(git --git-dir=$HOME/.asdf/.git describe --abbrev=0 --tags)
{{ end -}}
{{ end -}}
